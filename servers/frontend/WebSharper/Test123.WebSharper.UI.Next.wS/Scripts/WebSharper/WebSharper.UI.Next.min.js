(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu;$.Define($$,{WebSharper:{UI:{Next:{Abbrev:{Async:{Schedule:function(bv){return a.Start(a.Delay(function(){return a.Return(bv(null));}),{$:0});},StartTo:function(bw,bx){return a.StartWithContinuations(bw,bx,function(){},function(){},{$:0});}},Dict:{ToKeyArray:function(bA){var bB;bB=b(bA.count);c.iteri(function(bC){return function(bD){return d.set(bB,bC,bD.K);};},bA);return bB;},ToValueArray:function(bE){var bF;bF=b(bE.count);c.iteri(function(bG){return function(bH){return d.set(bF,bG,bH.V);};},bE);return bF;}},Fresh:{Id:function(){var bI;bI=h.counter()+1;h.counter=function(){return bI;};return"uid"+$$.String(h.counter());},Int:function(){var bJ;bJ=h.counter()+1;h.counter=function(){return bJ;};return h.counter();},counter:$.Field(function(){return 0;})},HashSet:{Except:function(bK,bL){var bM;bM=j.New(k.ToArray(bL));bM.ExceptWith(k.ToArray(bK));return bM;},Filter:function(bN,bO){return j.New(d.filter(bN,k.ToArray(bO)));},Intersect:function(bP,bQ){var bR;bR=j.New(k.ToArray(bP));bR.IntersectWith(k.ToArray(bQ));return bR;},ToArray:function(bS){var bT;bT=b(bS.get_Count());bS.CopyTo(bT);return bT;}},JQueue:{Add:function($x,$q){var $0=this,$this=this;return $q.push($x);},Count:function(bU){return bU.length;},Dequeue:function($q){var $0=this,$this=this;return $q.shift();},Iter:function(bV,bW){return d.iter(bV,l.ToArray(bW));},ToArray:function(bX){return bX.slice();}},Mailbox:{StartProcessor:function(bY){var bZ,b0,b1;bZ=[];b0=[false];b1=a.Delay(function(){return a.Combine(a.While(function(){return l.Count(bZ)>0;},a.Delay(function(){return a.Bind(bY(l.Dequeue(bZ)),function(){return a.Return(null);});})),a.Delay(function(){return a.Return(void(b0[0]=false));}));});return function(b7){l.Add(b7,bZ);if(!b0[0]){b0[0]=true;return a.Start(b1,{$:0});}else{return null;}};}},Slot1:$.Class({Equals:function(b8){return m.Equals(this.key.call(null,this.value),this.key.call(null,b8.get_Value()));},GetHashCode:function(){return m.Hash(this.key.call(null,this.value));},get_Value:function(){return this.value;}},{Create:function(b9,b_){return n.New(b9,b_);},New:function(b$,ca){var cb;cb=$.New(this,{});cb.key=b$;cb.value=ca;return cb;}}),U:function(){return;}},An:$.Class({},{Append:function(cc,cd){return $.New(o,{$:0,$0:p.Append(cc.$0,cd.$0)});},Concat:function(ce){return $.New(o,{$:0,$0:p.Concat(c.map(function(cf){return q.List(cf);},ce))});},Const:function(cg){return q.Const(cg);},Delayed:function(ch,ci,cj,ck,cl,cm){return{Compute:function(cn){return cn<=ck?cl:ch.Interpolate(ci.TransformTime.call(null,(cn-ck)/cj),cl,cm);},Duration:cj+ck};},Map:function(co,cp){var cq;cq=cp.Compute;return q.Def(cp.Duration,function(cr){return co(cq(cr));});},Pack:function(cs){return $.New(o,{$:0,$0:p.Single({$:1,$0:cs})});},Play:function(ct){return a.Delay(function(){return a.Bind(o.Run(function(){},q.Actions(ct)),function(){return a.Return(q.Finalize(ct));});});},Run:function(cx,cy){var cz;cz=cy.Duration;return a.FromContinuations(function(cA){var cB,cC;cB=cA[0];cC=function(cD,cE){var cF;cF=cE-cD;cx(cy.Compute.call(null,cF));return cF<=cz?void r(function(cG){return cC(cD,cG);}):cB(null);};r(function(cH){return cC(cH,cH);});return;});},Simple:function(cI,cJ,cK,cL,cM){return{Compute:function(cN){return cI.Interpolate(cJ.TransformTime.call(null,cN/cK),cL,cM);},Duration:cK};},WhenDone:function(cO,cP){return o.Append($.New(o,{$:0,$0:p.Single({$:0,$0:cO})}),cP);},get_Empty:function(){return $.New(o,{$:0,$0:p.Empty()});}}),AnimatedAttrNode:$.Class({GetChangeAnim:function(cQ){var cR,cT=this;cR=[this.visible,this.logical];return o.WhenDone(function(){return cT.sync(cQ);},cR[0].$==1?cR[1].$==1?cT.dirty?o.Pack(o.Map(function(cU){return cT.pushVisible(cQ,cU);},s.AnimateChange(cT.tr,cR[0].$0,cR[1].$0))):o.get_Empty():o.get_Empty():o.get_Empty());},GetEnterAnim:function(cV){var cW,cY=this;cW=[this.visible,this.logical];return o.WhenDone(function(){return cY.sync(cV);},cW[0].$==1?cW[1].$==1?cY.dirty?o.Pack(o.Map(function(cZ){return cY.pushVisible(cV,cZ);},s.AnimateChange(cY.tr,cW[0].$0,cW[1].$0))):cW[0].$==0?cW[1].$==1?o.Pack(o.Map(function(c0){return cY.pushVisible(cV,c0);},s.AnimateEnter(cY.tr,cW[1].$0))):o.get_Empty():o.get_Empty():cW[0].$==0?cW[1].$==1?o.Pack(o.Map(function(c1){return cY.pushVisible(cV,c1);},s.AnimateEnter(cY.tr,cW[1].$0))):o.get_Empty():o.get_Empty():cW[0].$==0?cW[1].$==1?o.Pack(o.Map(function(c2){return cY.pushVisible(cV,c2);},s.AnimateEnter(cY.tr,cW[1].$0))):o.get_Empty():o.get_Empty());},GetExitAnim:function(c3){var c4,c6=this;c4=this.visible;return o.WhenDone(function(){c6.dirty=true;c6.visible={$:0};return;},c4.$==1?o.Pack(o.Map(function(c7){return c6.pushVisible(c3,c7);},t.AnimateExit(c6.tr,c4.$0))):o.get_Empty());},Init:function(){return null;},Sync:function(){return null;},get_Changed:function(){return this.updates;},pushVisible:function(c_,c$){this.visible={$:1,$0:c$};this.dirty=true;return(this.push.call(null,c_))(c$);},sync:function(da){if(this.dirty){u.iter(this.push.call(null,da),this.logical);this.visible=this.logical;this.dirty=false;return;}else{return null;}}},{New:function(db,dc,dd){var de;de=$.New(this,{});de.tr=db;de.push=dd;de.logical={$:0};de.visible={$:0};de.dirty=true;de.updates=v.Map(function(df){de.logical={$:1,$0:df};de.dirty=true;return;},dc);return de;}}),Anims:{Actions:function(dg){return q.ConcatActions(d.choose(function(dh){return dh.$==1?{$:1,$0:dh.$0}:{$:0};},p.ToArray(dg.$0)));},ConcatActions:function(di){var dj,dk,dl,dn;dj=c.toArray(di);dk=d.length(dj);if(dk===0){return q.Const(null);}else{if(dk===1){return d.get(dj,0);}else{dl=c.max(c.map(function(dm){return dm.Duration;},dj));dn=d.map(function(_do){return q.Prolong(dl,_do);},dj);return q.Def(dl,function(dp){return d.iter(function(dq){return dq.Compute.call(null,dp);},dn);});}}},Const:function(dr){return q.Def(0,function(){return dr;});},Def:function(dt,du){return{Compute:du,Duration:dt};},Finalize:function(dv){return d.iter(function(dw){return dw.$==0?dw.$0.call(null,null):null;},p.ToArray(dv.$0));},List:function(dx){return dx.$0;},Prolong:function(dy,dz){var dA,dB,dC;dA=dz.Compute;dB=dz.Duration;dC=w.Create(function(){return dz.Compute.call(null,dz.Duration);});return{Compute:function(dE){return dE>=dB?dC.eval():dA(dE);},Duration:dy};}},AppendList1:{Append:function(dF,dG){var dH;dH=[dF,dG];return dH[0].$==0?dH[1]:dH[1].$==0?dH[0]:{$:2,$0:dF,$1:dG};},Concat:function(dI){var dJ;dJ=c.toArray(dI);return x.MapReduce(function(dK){return dK;},p.Empty(),function(dL){return function(dM){return p.Append(dL,dM);};},dJ);},Empty:function(){return{$:0};},FromArray:function(dN){var dO;dO=dN.length;return dO===0?{$:0}:dO===1?{$:1,$0:d.get(dN,0)}:{$:3,$0:dN.slice()};},Single:function(dP){return{$:1,$0:dP};},ToArray:function(dQ){var dR,dS;dR=[];dS=function(dT){var dU;if(dT.$==1){return l.Add(dT.$0,dR);}else{if(dT.$==2){dU=dT.$1;dS(dT.$0);return dS(dU);}else{return dT.$==3?d.iter(function(dV){return l.Add(dV,dR);},dT.$0):null;}}};dS(dQ);return l.ToArray(dR);}},Array:{MapReduce:function(dW,dX,dY,dZ){var d0;d0=function(d1,d2){var d3,d4,d5,d6,d7,d8;if(d2<=0){return dX;}else{if(d2===1){if(d1>=0?d1<d.length(dZ):false){return dW(d.get(dZ,d1));}else{d3=d2/2>>0;d4=d0(d1,d3);d5=d0(d1+d3,d2-d3);return(dY(d4))(d5);}}else{d6=d2/2>>0;d7=d0(d1,d6);d8=d0(d1+d6,d2-d6);return(dY(d7))(d8);}}};return d0(0,d.length(dZ));}},AttrModule:{Animated:function(d9,d_,d$,ea){return y.Animated(d_,d$,function(eb){return function(ec){return z.SetAttr(eb,d9,ea(ec));};});},AnimatedStyle:function(ed,ee,ef,eg){return y.Animated(ee,ef,function(eh){return function(ei){return z.SetStyle(eh,ed,eg(ei));};});},Class:function(ej){return y.Static(function(ek){return z.AddClass(ek,ej);});},ContentEditableHtml:function(el){var em;em=A.CustomVar(el,function(en){return function(eo){en.innerHTML=eo;};},function(ep){return{$:1,$0:ep.innerHTML};});return B.Append(B.Create("contenteditable","true"),em);},ContentEditableText:function(eq){var er;er=A.CustomVar(eq,function(es){return function(et){es.textContent=et;};},function(eu){return{$:1,$0:eu.textContent};});return B.Append(B.Create("contenteditable","true"),er);},CustomValue:function(ev,ew,ex){return A.CustomVar(ev,function(ey){return function(ez){ey.value=ew(ez);};},function(eA){return ex(eA.value);});},CustomVar:function(eB,eC,eD){var eE,eJ;eE=function(eF){return function(){return eB.UpdateMaybe(function(eH){var eI;eI=eD(eF);return eI.$==1?!m.Equals(eI.$0,eH)?eI:{$:0}:{$:0};});};};eJ=function(eK){return function(eL){var eM;eM=eD(eK);return eM.$==1?m.Equals(eM.$0,eL)?null:(eC(eK))(eL):(eC(eK))(eL);};};return B.Concat(C.ofArray([A.Handler("change",eE),A.Handler("input",eE),A.Handler("keypress",eE),A.DynamicCustom(eJ,eB.get_View())]));},Dynamic:function(eN,eO){return y.Dynamic(eO,function(){},function(eQ){return function(eR){return z.SetAttr(eQ,eN,eR);};});},DynamicClass:function(eS,eT,eU){return y.Dynamic(eT,function(){},function(eW){return function(eX){return eU(eX)?z.AddClass(eW,eS):z.RemoveClass(eW,eS);};});},DynamicCustom:function(eY,eZ){return y.Dynamic(eZ,function(){},eY);},DynamicPred:function(e1,e2,e3){var e4;e4=function(e5){return function(e6){var e7;e7=e6[1];return e6[0]?z.SetAttr(e5,e1,e7):z.RemoveAttr(e5,e1);};};return y.Dynamic(v.Map2(function(e8){return function(e9){return[e8,e9];};},e2,e3),function(){},e4);},DynamicProp:function(e$,fa){return y.Dynamic(fa,function(){},function(fc){return function(fd){fc[e$]=fd;};});},DynamicStyle:function(fe,ff){return y.Dynamic(ff,function(){},function(fh){return function(fi){return z.SetStyle(fh,fe,fi);};});},Handler:function(fj,fk){return y.Static(function(fl){return fl.addEventListener(fj,fk(fl),false);});},HandlerView:function(fm,fn,fo){var fp;fp=h.Id();return y.Dynamic(fn,function(fq){var fr;fr=fo(fq);return fq.addEventListener(fm,function(fs){return(fr(fs))(fq[fp]);},false);},function(ft){return function(fu){ft[fp]=fu;};});},OnAfterRender:function(fv){return y.Mk(0,{$:4,$0:fv});},Style:function(fw,fx){return y.Static(function(fy){return z.SetStyle(fy,fw,fx);});},ValidateForm:$.Field(function(){return A.OnAfterRender(function(fz){return $$.H5F?$$.H5F.setup(fz):undefined;});}),Value:function(fA){return A.CustomValue(fA,function(fB){return fB;},function(fC){return{$:1,$0:fC};});}},AttrProxy:$.Class({},{Append:function(fD,fE){return y.Mk(fD.Flags|fE.Flags,y.AppendTree(fD.Tree,fE.Tree));},Concat:function(fF){var fG;fG=c.toArray(fF);return x.MapReduce(function(fH){return fH;},B.get_Empty(),function(fI){return function(fJ){return B.Append(fI,fJ);};},fG);},Create:function(fK,fL){return y.Static(function(fM){return z.SetAttr(fM,fK,fL);});},Handler:function(fN,fO){return y.Static(function(fP){return fP.addEventListener(fN,fO(fP),false);});},get_Empty:function(){return y.EmptyAttr();}}),Attrs:{Animated:function(fQ,fR,fS){var fT,fU;fT=D.New(fQ,fR,fS);fU=4;if(t.CanAnimateEnter(fQ)){fU=fU|1;}if(t.CanAnimateExit(fQ)){fU=fU|2;}return y.Mk(fU,{$:1,$0:fT});},AppendTree:function(fV,fW){var fX;fX=[fV,fW];return fX[0].$==0?fX[1]:fX[1].$==0?fX[0]:{$:2,$0:fV,$1:fW};},Dynamic:function(fY,fZ,f0){return y.Mk(0,{$:1,$0:E.New(fY,fZ,f0)});},EmptyAttr:$.Field(function(){return y.Mk(0,{$:0});}),GetAnim:function(f1,f2){return o.Concat(d.map(function(f3){return(f2(f3))(f1.DynElem);},f1.DynNodes));},GetChangeAnim:function(f4){return y.GetAnim(f4,function(f5){return function(f6){return f5.GetChangeAnim(f6);};});},GetEnterAnim:function(f7){return y.GetAnim(f7,function(f8){return function(f9){return f8.GetEnterAnim(f9);};});},GetExitAnim:function(f_){return y.GetAnim(f_,function(f$){return function(ga){return f$.GetExitAnim(ga);};});},HasChangeAnim:function(gb){return(gb.DynFlags&4)!==0;},HasEnterAnim:function(gc){return(gc.DynFlags&1)!==0;},HasExitAnim:function(gd){return(gd.DynFlags&2)!==0;},Insert:function(ge,gf){var gg,gh,gi;gg=[];gh=[];gi=function(gj){var gk,gl;if(gj.$==1){gk=gj.$0;gk.Init(ge);return l.Add(gk,gg);}else{if(gj.$==2){gl=gj.$1;gi(gj.$0);return gi(gl);}else{return gj.$==3?gj.$0.call(null,ge):gj.$==4?l.Add(gj.$0,gh):null;}}};gi(gf.Tree);return $.DeleteEmptyFields({DynElem:ge,DynFlags:gf.Flags,DynNodes:l.ToArray(gg),OnAfterRender:(l.Count(gh)===0?{$:0}:{$:1,$0:function(gm){return l.Iter(function(gn){return gn(gm);},gh);}}).$0},["OnAfterRender"]);},Mk:function(go,gp){return $.New(B,{Flags:go,Tree:gp});},Static:function(gq){return y.Mk(0,{$:3,$0:gq});},Sync:function(gr,gs){return d.iter(function(gt){return gt.Sync(gr);},gs.DynNodes);},Updates:function(gu){var gv,gA;gv=function(gw){return function(gx){return v.Map2(function(){return function(){return null;};},gw,gx);};};gA=gu.DynNodes;return x.MapReduce(function(gB){return gB.get_Changed();},F.Const(null),gv,gA);}},CheckedInput:$.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}}),Doc:$.Class({ReplaceInDom:function(gC){var gD;gD=G.createTextNode("");gC.parentNode.replaceChild(gD,gC);return H.RunBefore(gD,this);},get_DocNode:function(){return this.docNode;},get_Updates:function(){return this.updates;}},{Append:function(gE,gF){var gG;gG=v.Map2(function(){return function(){return null;};},gE.get_Updates(),gF.get_Updates());return H.Mk({$:0,$0:gE.get_DocNode(),$1:gF.get_DocNode()},gG);},Async:function(gJ){return H.EmbedView(v.MapAsync(function(gK){return gK;},F.Const(gJ)));},BindView:function(gL,gM){return H.EmbedView(v.Map(gL,gM));},Button:function(gN,gO,gP){var gQ;gQ=B.Concat(gO);return I.New(H.Clickable("button",gP),gQ,H.TextNode(gN));},ButtonView:function(gR,gS,gT,gU){var gV;gV=B.Concat(c.append([A.HandlerView("click",gT,function(){return function(){return gU;};})],gS));return I.New(z.CreateElement("button"),gV,H.TextNode(gR));},CheckBox:function(gY,gZ){var g0;g0=z.CreateElement("input");g0.addEventListener("click",function(){return gZ.Set(g0.checked);},false);return I.New(g0,B.Concat(c.toList(c.delay(function(){return c.append(gY,c.delay(function(){return c.append([B.Create("type","checkbox")],c.delay(function(){return[A.DynamicProp("checked",gZ.get_View())];}));}));}))),H.get_Empty());},CheckBoxGroup:function(g5,g6,g7){var g8,g9,g$,hb,hc;g8=g7.get_View();g9=function(g_){return m.Equals(g_,g6);};g$=v.Map(function(ha){return c.exists(g9,ha);},g8);hb=B.Concat(C.append(C.ofArray([B.Create("type","checkbox"),B.Create("name",g7.get_Id()),B.Create("value",h.Id()),A.DynamicProp("checked",g$)]),C.ofSeq(g5)));hc=z.CreateElement("input");hc.addEventListener("click",function(){var he;he=hc.checked;return g7.Update(function(hf){return c.toList(J.distinct(he?C.append(hf,C.ofArray([g6])):C.filter(function(hg){return!m.Equals(hg,g6);},hf)));});},false);return I.New(hc,hb,H.get_Empty());},Clickable:function(hh,hi){var hj;hj=z.CreateElement(hh);hj.addEventListener("click",function(hk){hk.preventDefault();return hi(null);},false);return hj;},Concat:function(hl){var hm;hm=c.toArray(hl);return x.MapReduce(function(hn){return hn;},H.get_Empty(),function(ho){return function(hp){return H.Append(ho,hp);};},hm);},Convert:function(hq,hr){return H.Flatten(v.MapSeqCached(hq,hr));},ConvertBy:function(hs,ht,hu){return H.Flatten(v.MapSeqCachedBy(hs,ht,hu));},ConvertSeq:function(hv,hw){return H.Flatten(v.MapSeqCachedView(hv,hw));},ConvertSeqBy:function(hx,hy,hz){return H.Flatten(v.MapSeqCachedViewBy(hx,hy,hz));},Element:function(hA,hB,hC){var hD,hE;hD=B.Concat(hB);hE=H.Concat(hC);return I.New(z.CreateElement(hA),hD,hE);},EmbedView:function(hF){var hG,hH;hG=K.CreateEmbedNode();hH=v.Map(function(){},F.Bind(function(hJ){K.UpdateEmbedNode(hG,hJ.get_DocNode());return hJ.get_Updates();},hF));return H.Mk({$:2,$0:hG},hH);},Flatten:function(hK){return H.EmbedView(v.Map(function(hL){return H.Concat(hL);},hK));},FloatInput:function(hM,hN){return H.InputInternal("input",function(hO){return c.append(hM,[A.CustomValue(hN,function(hP){return hP.get_Input();},function(hQ){var hR,hS;if(L.isBlank(hQ)){hR=(hO.checkValidity?hO.checkValidity():true)?$.New(M,{$:2,$0:hQ}):$.New(M,{$:1,$0:hQ});}else{hS=+hQ;hR=$$.isNaN(hS)?$.New(M,{$:1,$0:hQ}):$.New(M,{$:0,$0:hS,$1:hQ});}return{$:1,$0:hR};}),B.Create("type","number")]);});},FloatInputUnchecked:function(hT,hU){var hV;hV=function(hW){var hX;if(L.isBlank(hW)){return{$:1,$0:0};}else{hX=+hW;return $$.isNaN(hX)?{$:0}:{$:1,$0:hX};}};return H.InputInternal("input",function(){return c.append(hT,[hU.Get()===0?B.Create("value","0"):B.get_Empty(),A.CustomValue(hU,function(hZ){return $$.String(hZ);},hV),B.Create("type","number")]);});},Input:function(h0,h1){return H.InputInternal("input",function(){return c.append(h0,[A.Value(h1)]);});},InputArea:function(h3,h4){return H.InputInternal("textarea",function(){return c.append(h3,[A.Value(h4)]);});},InputInternal:function(h6,h7){var h8;h8=z.CreateElement(h6);return I.New(h8,B.Concat(h7(h8)),H.get_Empty());},IntInput:function(h9,h_){return H.InputInternal("input",function(h$){return c.append(h9,[A.CustomValue(h_,function(ia){return ia.get_Input();},function(ib){var ic,id;if(L.isBlank(ib)){ic=(h$.checkValidity?h$.checkValidity():true)?$.New(M,{$:2,$0:ib}):$.New(M,{$:1,$0:ib});}else{id=+ib;ic=$$.isNaN(id)?$.New(M,{$:1,$0:ib}):$.New(M,{$:0,$0:id,$1:ib});}return{$:1,$0:ic};}),B.Create("type","number"),B.Create("step","1")]);});},IntInputUnchecked:function(ie,_if){var ig;ig=function(ih){var ii;if(L.isBlank(ih)){return{$:1,$0:0};}else{ii=+ih;return ii!==ii>>0?{$:0}:{$:1,$0:ii};}};return H.InputInternal("input",function(){return c.append(ie,[_if.Get()===0?B.Create("value","0"):B.get_Empty(),A.CustomValue(_if,function(ik){return $$.String(ik);},ig),B.Create("type","number"),B.Create("step","1")]);});},Link:function(il,im,_in){var io,ip;io=B.Concat(im);ip=B.Append(B.Create("href","#"),io);return I.New(H.Clickable("a",_in),ip,H.TextNode(il));},LinkView:function(iq,ir,is,it){var iu;iu=B.Concat(c.append([A.HandlerView("click",is,function(){return function(){return it;};}),B.Create("href","#")],ir));return I.New(z.CreateElement("a"),iu,H.TextNode(iq));},Mk:function(ix,iy){return H.New(ix,iy);},New:function(iz,iA){var iB;iB=$.New(this,{});iB.docNode=iz;iB.updates=iA;return iB;},PasswordBox:function(iC,iD){return H.InputInternal("input",function(){return c.append(iC,[A.Value(iD),B.Create("type","password")]);});},Radio:function(iF,iG,iH){var iI,iK,iM;iI=z.CreateElement("input");iI.addEventListener("click",function(){return iH.Set(iG);},false);iK=A.DynamicProp("checked",v.Map(function(iL){return m.Equals(iL,iG);},iH.get_View()));iM=function(iN,iO){return B.Create(iN,iO);};return I.New(iI,B.Concat(C.append(C.ofArray([iM("type","radio"),iM("name",iH.get_Id()),iK]),C.ofSeq(iF))),H.get_Empty());},Run:function(iP,iQ){var iR,iS;iR=iQ.get_DocNode();K.LinkElement(iP,iR);iS=K.CreateRunState(iP,iR);return F.Sink(N.StartProcessor(function(){return K.PerformAnimatedUpdate(iS,iR);}),iQ.get_Updates());},RunAfter:function(iU,iV){var iW;iW=G.createTextNode("");iU.parentNode.insertBefore(iW,iU.nextSibling);return H.RunBetween(iU,iW,iV);},RunAfterById:function(iX,iY){var iZ;iZ=z.Doc().getElementById(iX);return m.Equals(iZ,null)?O.FailWith("invalid id: "+iX):H.RunAfter(iZ,iY);},RunAppend:function(i0,i1){var i2;i2=G.createTextNode("");i0.appendChild(i2);return H.RunBefore(i2,i1);},RunAppendById:function(i3,i4){var i5;i5=z.Doc().getElementById(i3);return m.Equals(i5,null)?O.FailWith("invalid id: "+i3):H.RunAppend(i5,i4);},RunBefore:function(i6,i7){var i8;i8=G.createTextNode("");i6.parentNode.insertBefore(i8,i6);return H.RunBetween(i8,i6,i7);},RunBeforeById:function(i9,i_){var i$;i$=z.Doc().getElementById(i9);return m.Equals(i$,null)?O.FailWith("invalid id: "+i9):H.RunBefore(i$,i_);},RunBetween:function(ja,jb,jc){var jd;K.LinkPrevElement(jb,jc.get_DocNode());jd=K.CreateDelimitedRunState(ja,jb,jc.get_DocNode());return F.Sink(N.StartProcessor(function(){return K.PerformAnimatedUpdate(jd,jc.get_DocNode());}),jc.get_Updates());},RunById:function(jf,jg){var jh;jh=z.Doc().getElementById(jf);return m.Equals(jh,null)?O.FailWith("invalid id: "+jf):H.Run(jh,jg);},RunPrepend:function(ji,jj){var jk;jk=G.createTextNode("");ji.insertBefore(jk,ji.firstChild);return H.RunBefore(jk,jj);},RunPrependById:function(jl,jm){var jn;jn=z.Doc().getElementById(jl);return m.Equals(jn,null)?O.FailWith("invalid id: "+jl):H.RunPrepend(jn,jm);},Select:function(jo,jp,jq,jr){return H.SelectDyn(jo,jp,F.Const(jq),jr);},SelectDyn:function(js,jt,ju,jv){var jw,jx,jB,jC,jD,jH;jw=[$.New(P,{$:0})];jx=function(jy){return function(jz){jy.selectedIndex=c.findIndex(function(jA){return m.Equals(jz,jA);},jw[0]);};};jB=z.CreateElement("select");jC=jv.get_View();jD=A.DynamicCustom(jx,jC);jB.addEventListener("change",function(){return jv.UpdateMaybe(function(jF){var jG;jG=jw[0].get_Item(jB.selectedIndex);return m.Equals(jF,jG)?{$:0}:{$:1,$0:jG};});},false);jH=H.Convert(function(jI){var jJ,jK;jJ=jI[0];jK=H.TextNode(jt(jI[1]));return H.Element("option",C.ofArray([B.Create("value",$$.String(jJ))]),C.ofArray([jK]));},v.Map(function(jL){jw[0]=jL;return c.mapi(function(jM){return function(jN){return[jM,jN];};},jL);},ju));return I.New(jB,B.Append(jD,B.Concat(js)),jH);},SelectDynOptional:function(jO,jP,jQ,jR,jS){return H.SelectDyn(jO,function(jT){return jT.$==1?jQ(jT.$0):jP;},v.Map(function(jU){return $.New(P,{$:1,$0:{$:0},$1:C.map(function(jV){return{$:1,$0:jV};},jU)});},jR),jS);},SelectOptional:function(jW,jX,jY,jZ,j0){return H.Select(jW,function(j1){return j1.$==1?jY(j1.$0):jX;},$.New(P,{$:1,$0:{$:0},$1:C.map(function(j2){return{$:1,$0:j2};},jZ)}),j0);},Static:function(j3){return I.New(j3,B.get_Empty(),H.get_Empty());},SvgElement:function(j4,j5,j6){var j7,j8;j7=B.Concat(j5);j8=H.Concat(j6);return I.New(z.CreateSvgElement(j4),j7,j8);},TextNode:function(j9){return H.Mk({$:5,$0:z.CreateText(j9)},F.Const(null));},TextView:function(j_){var j$,ka;j$=K.CreateTextNode();ka=v.Map(function(kb){return K.UpdateTextNode(j$,kb);},j_);return H.Mk({$:4,$0:j$},ka);},Verbatim:function(kc){var kd,ke,kf;kd=Q.parseHTML(kc);ke=m.Equals(kd,null)?[]:kd;kf=function(kg){return function(kh){return{$:0,$0:kg,$1:kh};};};return H.Mk(x.MapReduce(function(ki){return{$:1,$0:K.CreateElemNode(ki,B.get_Empty(),{$:3})};},{$:3},kf,ke),F.Const(null));},get_Empty:function(){return H.Mk({$:3},F.Const(null));}}),DocElemNode:$.Class({Equals:function(kj){return this.ElKey===kj.ElKey;},GetHashCode:function(){return this.ElKey;}}),Docs:{ComputeChangeAnim:function(kk,kl){var km,ko;km=function(kn){return y.HasChangeAnim(kn.Attr);};ko=function(kp){return R.Filter(km,kp);};return o.Concat(d.map(function(kq){return y.GetChangeAnim(kq.Attr);},R.ToArray(R.Intersect(ko(kk.PreviousNodes),ko(kl)))));},ComputeEnterAnim:function(kr,ks){return o.Concat(d.map(function(kt){return y.GetEnterAnim(kt.Attr);},R.ToArray(R.Except(kr.PreviousNodes,R.Filter(function(ku){return y.HasEnterAnim(ku.Attr);},ks)))));},ComputeExitAnim:function(kv,kw){return o.Concat(d.map(function(kx){return y.GetExitAnim(kx.Attr);},R.ToArray(R.Except(kw,R.Filter(function(ky){return y.HasExitAnim(ky.Attr);},kv.PreviousNodes)))));},CreateDelimitedElemNode:function(kz,kA,kB,kC){var kD,kE;kD=kz.parentNode;K.LinkPrevElement(kA,kC);kE=y.Insert(kD,kB);return $.New(S,$.DeleteEmptyFields({Attr:kE,Children:kC,Delimiters:[kz,kA],El:kD,ElKey:h.Int(),Render:$.GetOptional(kE.OnAfterRender).$0},["Render"]));},CreateDelimitedRunState:function(kF,kG,kH){return{PreviousNodes:R.get_Empty(),Top:K.CreateDelimitedElemNode(kF,kG,B.get_Empty(),kH)};},CreateElemNode:function(kI,kJ,kK){var kL;K.LinkElement(kI,kK);kL=y.Insert(kI,kJ);return $.New(S,$.DeleteEmptyFields({Attr:kL,Children:kK,El:kI,ElKey:h.Int(),Render:$.GetOptional(kL.OnAfterRender).$0},["Render"]));},CreateEmbedNode:function(){return{Current:{$:3},Dirty:false};},CreateRunState:function(kM,kN){return{PreviousNodes:R.get_Empty(),Top:K.CreateElemNode(kM,B.get_Empty(),kN)};},CreateTextNode:function(){return{Text:z.CreateText(""),Dirty:false,Value:""};},DoSyncElement:function(kO){var kP,kQ,kU,kW;kP=kO.El;kQ=function(kR,kS){var kT;if(kR.$==1){return{$:1,$0:kR.$0.El};}else{if(kR.$==2){kT=kR.$0;if(kT.Dirty){kT.Dirty=false;return K.InsertDoc(kP,kT.Current,kS);}else{return kQ(kT.Current,kS);}}else{return kR.$==3?kS:kR.$==4?{$:1,$0:kR.$0.Text}:kR.$==5?{$:1,$0:kR.$0}:kQ(kR.$0,kQ(kR.$1,kS));}}};kU=kO.El;T.Iter(function(kV){return z.RemoveNode(kU,kV);},T.Except(T.DocChildren(kO),T.Children(kO.El,$.GetOptional(kO.Delimiters))));kW=$.GetOptional(kO.Delimiters);kQ(kO.Children,kW.$==1?{$:1,$0:kW.$0[1]}:{$:0});return;},DomNodes:$.Class({},{Children:function(kX,kY){var kZ,k0,k1,k2,k3;if(kY.$==1){kZ=kY.$0[1];k0=kY.$0[0];k1=b.prototype.constructor.apply(b,[]);k2=k0.nextSibling;while(k2!==kZ){k1.push(k2);k2=k2.nextSibling;}return $.New(T,{$:0,$0:k1});}else{k3=kX.childNodes;return $.New(T,{$:0,$0:d.init(kX.childNodes.length,function(k4){return k3[k4];})});}},DocChildren:function(k5){var k6,k7;k6=[];k7=function(k8){var k9;if(k8.$==2){return k7(k8.$0.Current);}else{if(k8.$==1){return l.Add(k8.$0.El,k6);}else{if(k8.$==3){return null;}else{if(k8.$==5){return null;}else{if(k8.$==4){return l.Add(k8.$0.Text,k6);}else{k9=k8.$1;k7(k8.$0);return k7(k9);}}}}}};k7(k5.Children);return $.New(T,{$:0,$0:l.ToArray(k6)});},Except:function(k_,k$){var la;la=k_.$0;return $.New(T,{$:0,$0:d.filter(function(lb){return c.forall(function(lc){return!(lb===lc);},la);},k$.$0)});},FoldBack:function(ld,le,lf){return d.foldBack(ld,le.$0,lf);},Iter:function(lg,lh){return d.iter(lg,lh.$0);}}),InsertDoc:function(li,lj,lk){var ll;if(lj.$==1){return K.InsertNode(li,lj.$0.El,lk);}else{if(lj.$==2){ll=lj.$0;ll.Dirty=false;return K.InsertDoc(li,ll.Current,lk);}else{return lj.$==3?lk:lj.$==4?K.InsertNode(li,lj.$0.Text,lk):lj.$==5?K.InsertNode(li,lj.$0,lk):K.InsertDoc(li,lj.$0,K.InsertDoc(li,lj.$1,lk));}}},InsertNode:function(lm,ln,lo){z.InsertAt(lm,lo,ln);return{$:1,$0:ln};},LinkElement:function(lp,lq){K.InsertDoc(lp,lq,{$:0});},LinkPrevElement:function(lr,ls){K.InsertDoc(lr.parentNode,ls,{$:1,$0:lr});},NodeSet:$.Class({},{Except:function(lt,lu){return $.New(R,{$:0,$0:k.Except(lt.$0,lu.$0)});},Filter:function(lv,lw){return $.New(R,{$:0,$0:k.Filter(lv,lw.$0)});},FindAll:function(lx){var ly,lz;ly=[];lz=function(lA){var lB,lC;if(lA.$==0){lB=lA.$1;lz(lA.$0);return lz(lB);}else{if(lA.$==1){lC=lA.$0;l.Add(lC,ly);return lz(lC.Children);}else{return lA.$==2?lz(lA.$0.Current):null;}}};lz(lx);return $.New(R,{$:0,$0:j.New(l.ToArray(ly))});},Intersect:function(lD,lE){return $.New(R,{$:0,$0:k.Intersect(lD.$0,lE.$0)});},IsEmpty:function(lF){return lF.$0.get_Count()===0;},ToArray:function(lG){return k.ToArray(lG.$0);},get_Empty:function(){return $.New(R,{$:0,$0:j.New11()});}}),PerformAnimatedUpdate:function(lH,lI){return a.Delay(function(){var lK,lL,lM;lK=R.FindAll(lI);lL=K.ComputeChangeAnim(lH,lK);lM=K.ComputeEnterAnim(lH,lK);return a.Bind(o.Play(o.Append(lL,K.ComputeExitAnim(lH,lK))),function(){K.SyncElemNode(lH.Top);return a.Bind(o.Play(lM),function(){return a.Return(void(lH.PreviousNodes=lK));});});});},Sync:function(lP){var lQ;lQ=function(lR){var lS,lT,lU;if(lR.$==1){lS=lR.$0;K.SyncElement(lS);return lQ(lS.Children);}else{if(lR.$==2){return lQ(lR.$0.Current);}else{if(lR.$==3){return null;}else{if(lR.$==5){return null;}else{if(lR.$==4){lT=lR.$0;if(lT.Dirty){lT.Text.nodeValue=lT.Value;lT.Dirty=false;return;}else{return null;}}else{lU=lR.$1;lQ(lR.$0);return lQ(lU);}}}}}};return lQ(lP);},SyncElemNode:function(lV){K.SyncElement(lV);return K.Sync(lV.Children);},SyncElement:function(lW){var lX,l1;y.Sync(lW.El,lW.Attr);lX=function(lY){var lZ,l0;if(lY.$==0){lZ=lY.$1;return lX(lY.$0)?true:lX(lZ);}else{if(lY.$==2){l0=lY.$0;return l0.Dirty?true:lX(l0.Current);}else{return false;}}};if(lX(lW.Children)){K.DoSyncElement(lW);}l1=$.GetOptional(lW.Render);if(l1.$==1){l1.$0.call(null,lW.El);delete lW.Render;return;}else{return null;}},UpdateEmbedNode:function(l2,l3){l2.Current=l3;l2.Dirty=true;return;},UpdateTextNode:function(l4,l5){l4.Value=l5;l4.Dirty=true;return;}},DomUtility:{AddClass:function(l6,l7){Q(l6).addClass(l7);},AppendTo:function(l8,l9){l8.appendChild(l9);},Clear:function(l_){while(l_.hasChildNodes()){l_.removeChild(l_.firstChild);}return;},ClearAttrs:function(l$){while(l$.hasAttributes()){l$.removeAttributeNode(l$.attributes.item(0));}return;},CreateAttr:function(ma,mb){var mc;mc=z.Doc().createAttribute(ma);mc.value=mb;return mc;},CreateElement:function(md){return z.Doc().createElement(md);},CreateSvgElement:function(me){return z.Doc().createElementNS("http://www.w3.org/2000/svg",me);},CreateText:function(mf){return z.Doc().createTextNode(mf);},Doc:$.Field(function(){return G;}),InsertAt:function(mg,mh,mi){var mj,mk,ml;if(mi.parentNode===mg){mk=mi.nextSibling;ml=[mh,m.Equals(mk,null)?{$:0}:{$:1,$0:mk}];mj=ml[0].$==1?ml[1].$==1?ml[0].$0===ml[1].$0:false:ml[1].$==0?true:false;}else{mj=false;}return!mj?mh.$==1?void mg.insertBefore(mi,mh.$0):void mg.appendChild(mi):null;},RemoveAttr:function(mm,mn){return mm.removeAttribute(mn);},RemoveClass:function(mo,mp){Q(mo).removeClass(mp);},RemoveNode:function(mq,mr){return mr.parentNode===mq?void mq.removeChild(mr):null;},SetAttr:function(ms,mt,mu){return ms.setAttribute(mt,mu);},SetProperty:function($target,$name,$value){var $0=this,$this=this;return $target.setProperty($name,$value);},SetStyle:function(mv,mw,mx){return z.SetProperty(mv.style,mw,mx);}},DoubleInterpolation:$.Class({Interpolate:function(my,mz,mA){return mz+my*(mA-mz);}}),DynamicAttrNode:$.Class({GetChangeAnim:function(){return o.get_Empty();},GetEnterAnim:function(){return o.get_Empty();},GetExitAnim:function(){return o.get_Empty();},Init:function(mE){return this.init.call(null,mE);},Sync:function(mF){if(this.dirty){(this.push.call(null,mF))(this.value);this.dirty=false;return;}else{return null;}},get_Changed:function(){return this.updates;}},{New:function(mG,mH,mI){var mJ;mJ=$.New(this,{});mJ.init=mH;mJ.push=mI;mJ.value=g.U();mJ.dirty=true;mJ.updates=v.Map(function(mK){mJ.value=mK;mJ.dirty=true;return;},mG);return mJ;}}),Easing:$.Class({},{Custom:function(mL){return $.New(U,{TransformTime:mL});},get_CubicInOut:function(){return V.CubicInOut();}}),Easings:{CubicInOut:$.Field(function(){return $.New(U,{TransformTime:function(mM){var mN;mN=mM*mM;return 3*mN-2*(mN*mM);}});})},Elt:$.Class({AddClass:function($cls){var $this=this;return $this.elt.className+=" "+$cls;},Append:function(mO){var mP;mP=this.get_DocElemNode();mP.Children={$:0,$0:mP.Children,$1:mO.get_DocNode()};W.Set(this.rvUpdates,v.Map2(function(){return function(){return null;};},W.Get(this.rvUpdates),mO.get_Updates()));K.InsertDoc(this.elt,mO.get_DocNode(),{$:0});return;},Clear:function(){this.get_DocElemNode().Children={$:3};W.Set(this.rvUpdates,F.Const(null));while(this.elt.hasChildNodes()){this.elt.removeChild(this.elt.firstChild);}return;},GetAttribute:function(mS){return this.elt.getAttribute(mS);},GetProperty:function(mT){return this.elt[mT];},GetText:function(){return this.elt.textContent;},GetValue:function(){return this.elt.value;},HasAttribute:function(mU){return this.elt.hasAttribute(mU);},HasClass:function(mV){return(new X("(\\s|^)"+mV+"(\\s|$)")).test(this.elt.className);},Html:function(){return this.elt.outerHTML;},Id:function(){return this.elt.id;},OnAfterRender:function(mW){var mX,mY,mZ;mX=$.GetOptional(this.get_DocElemNode().Render);if(mX.$==1){mZ=mX.$0;mY={$:1,$0:function(m0){mZ(m0);return mW(m0);}};}else{mY={$:1,$0:mW};}$.SetOptional(this.get_DocElemNode(),"Render",mY);return this;},Prepend:function(m1){var m2,m5,m6;m2=this.get_DocElemNode();m2.Children={$:0,$0:m1.get_DocNode(),$1:m2.Children};W.Set(this.rvUpdates,v.Map2(function(){return function(){return null;};},W.Get(this.rvUpdates),m1.get_Updates()));m5=this.elt.firstChild;m6=m.Equals(m5,null)?{$:0}:{$:1,$0:m5};K.InsertDoc(this.elt,m1.get_DocNode(),m6);return;},RemoveAttribute:function(m7){return this.elt.removeAttribute(m7);},RemoveClass:function(m8){this.elt.className=this.elt.className.replace(new X("(\\s|^)"+m8+"(\\s|$)")," ");},SetAttribute:function(m9,m_){return this.elt.setAttribute(m9,m_);},SetProperty:function(m$,na){this.elt[m$]=na;},SetStyle:function(nb,nc){this.elt.style[nb]=nc;},SetText:function(nd){this.get_DocElemNode().Children={$:3};W.Set(this.rvUpdates,F.Const(null));this.elt.textContent=nd;return;},SetValue:function(ne){this.elt.value=ne;},get_DocElemNode:function(){var nf;nf=this.docNode1;return nf.$==1?nf.$0:O.FailWith("Elt: Invalid docNode");},get_Element:function(){return this.elt;},on:function(ng,nh){this.elt.addEventListener(ng,nh(this.elt),false);return this;}},{New:function(ni,nj,nk){var nl,nm,nn,no,nr;nl=K.CreateElemNode(ni,nj,nk.get_DocNode());nm=Y.Create(nk.get_Updates());nn=y.Updates(nl.Attr);no=function(){return function(){return null;};};nr=F.Bind(function(ns){return v.Map2(no,nn,ns);},nm.get_View());return I.New1({$:1,$0:nl},nr,ni,nm,nn);},New1:function(nt,nu,nv,nw){var ny;ny=$.New(this,H.New(nt,nu));ny.docNode1=nt;ny.elt=nv;ny.rvUpdates=nw;return ny;}}),Flow:$.Class({},{Bind:function(nz,nA){return{Render:function(nB){return function(nC){return(nz.Render.call(null,nB))(function(nD){return(nA(nD).Render.call(null,nB))(nC);});};}};},Define:function(nE){return{Render:function(nF){return function(nG){return W.Set(nF,nE(nG));};}};},Embed:function(nH){var nI;nI=Y.Create(H.get_Empty());(nH.Render.call(null,nI))(function(){});return H.EmbedView(nI.get_View());},Map:function(nK,nL){return{Render:function(nM){return function(nN){return(nL.Render.call(null,nM))(function(nO){return nN(nK(nO));});};}};},Return:function(nP){return{Render:function(){return function(nR){return nR(nP);};}};},get_Do:function(){return Z.New();}}),Flow1:$.Class({},{Static:function(nS){return{Render:function(nT){return function(nU){W.Set(nT,nS);return nU(null);};}};}}),FlowBuilder:$.Class({Bind:function(nV,nW){return _0.Bind(nV,nW);},Return:function(nX){return _0.Return(nX);},ReturnFrom:function(nY){return nY;}},{New:function(){return $.New(this,{});}}),Html:{attr:$.Class({},{New:function(){return $.New(this,{});}})},Input:{ActivateButtonListener:$.Field(function(){var nZ,n3;nZ=function(n0,n1){var n2;n2=n0.button;return n2===0?W.Set(_1.MouseBtnSt1().Left,n1):n2===1?W.Set(_1.MouseBtnSt1().Middle,n1):n2===2?W.Set(_1.MouseBtnSt1().Right,n1):null;};if(!_1.MouseBtnSt1().Active){_1.MouseBtnSt1().Active=true;G.addEventListener("mousedown",function(n4){return nZ(n4,true);},false);n3=G.addEventListener("mouseup",function(n5){return nZ(n5,false);},false);}else{n3=null;}return n3;}),ActivateKeyListener:$.Field(function(){var n6;if(!_1.KeyListenerState().KeyListenerActive){Q(G).keydown(function(n7){var n8,n9;n8=n7.which;W.Set(_1.KeyListenerState().LastPressed,n8);n9=W.Get(_1.KeyListenerState().KeysPressed);return!c.exists(function(n_){return n_===n8;},n9)?W.Set(_1.KeyListenerState().KeysPressed,C.append(n9,C.ofArray([n8]))):null;});n6=void Q(G).keyup(function(n$){var oa,ob,od;oa=n$.which;ob=function(oc){return oc!==oa;};od=function(oe){return C.filter(ob,oe);};return W.Update(_1.KeyListenerState().KeysPressed,od);});}else{n6=null;}return n6;}),KeyListenerState:$.Field(function(){return{KeysPressed:Y.Create($.New(P,{$:0})),KeyListenerActive:false,LastPressed:Y.Create(-1)};}),Keyboard:$.Class({},{IsPressed:function(of){var og;_1.ActivateKeyListener();og=function(oh){return oh===of;};return v.Map(function(oi){return c.exists(og,oi);},_1.KeyListenerState().KeysPressed.get_View());},get_KeysPressed:function(){_1.ActivateKeyListener();return _1.KeyListenerState().KeysPressed.get_View();},get_LastPressed:function(){_1.ActivateKeyListener();return _1.KeyListenerState().LastPressed.get_View();}}),Mouse:$.Class({},{get_LeftPressed:function(){_1.ActivateButtonListener();return _1.MouseBtnSt1().Left.get_View();},get_MiddlePressed:function(){_1.ActivateButtonListener();return _1.MouseBtnSt1().Middle.get_View();},get_MousePressed:function(){_1.ActivateButtonListener();return F.Apply(F.Apply(F.Apply(F.Const(function(oj){return function(ok){return function(ol){return(oj?true:ok)?true:ol;};};}),_1.MouseBtnSt1().Left.get_View()),_1.MouseBtnSt1().Middle.get_View()),_1.MouseBtnSt1().Right.get_View());},get_Position:function(){var om;om=function(on){return W.Set(_1.MousePosSt1().PosV,[on.clientX,on.clientY]);};if(!_1.MousePosSt1().Active){G.addEventListener("mousemove",om,false);_1.MousePosSt1().Active=true;}return _1.MousePosSt1().PosV.get_View();},get_RightPressed:function(){_1.ActivateButtonListener();return _1.MouseBtnSt1().Right.get_View();}}),MouseBtnSt1:$.Field(function(){return{Active:false,Left:Y.Create(false),Middle:Y.Create(false),Right:Y.Create(false)};}),MousePosSt1:$.Field(function(){return{Active:false,PosV:Y.Create([0,0])};})},Interpolation1:$.Class({},{get_Double:function(){return $.New(_2,{$:0});}}),Key:$.Class({},{Fresh:function(){return $.New(_3,{$:0,$0:h.Int()});}}),ListModel:$.Class({Add:function(oo){var op,or=this;op=W.Get(this.Var);return!_4.Contains(this.get_Key(),oo,op)?W.Set(this.Var,this.Storage.Add(oo,op)):W.Set(this.Var,this.Storage.SetAt(d.findINdex(function(oq){return m.Equals((or.get_Key())(oq),(or.get_Key())(oo));},op),oo,op));},Clear:function(){return W.Set(this.Var,this.Storage.Set(c.empty()));},ContainsKey:function(os){var ou=this;return c.exists(function(ot){return m.Equals(ou.key.call(null,ot),os);},W.Get(ou.Var));},ContainsKeyAsView:function(ov){var ow,oy=this;ow=function(ox){return m.Equals(oy.key.call(null,ox),ov);};return v.Map(function(oz){return c.exists(ow,oz);},oy.Var.get_View());},Find:function(oA){return d.find(oA,W.Get(this.Var));},FindAsView:function(oB){return v.Map(function(oC){return d.find(oB,oC);},this.Var.get_View());},FindByKey:function(oD){var oF=this;return d.find(function(oE){return m.Equals(oF.key.call(null,oE),oD);},W.Get(oF.Var));},FindByKeyAsView:function(oG){var oH,oJ=this;oH=function(oI){return m.Equals(oJ.key.call(null,oI),oG);};return v.Map(function(oK){return d.find(oH,oK);},oJ.Var.get_View());},Iter:function(oL){return d.iter(oL,W.Get(this.Var));},Lens:function(oM){return this.LensInto(function(oN){return oN;},function(){return function(oP){return oP;};},oM);},LensInto:function(oQ,oR,oS){return _5.New(this,oS,oQ,oR);},Remove:function(oT){var oU,oV,oW;oU=W.Get(this.Var);if(_4.Contains(this.key,oT,oU)){oV=this.key;oW=oV(oT);return W.Set(this.Var,this.Storage.RemoveIf(function(oX){return!m.Equals(oV(oX),oW);},oU));}else{return null;}},RemoveBy:function(oY){return W.Set(this.Var,this.Storage.RemoveIf(function(oZ){return!oY(oZ);},W.Get(this.Var)));},RemoveByKey:function(o0){var o2=this;return W.Set(this.Var,this.Storage.RemoveIf(function(o1){return!m.Equals((o2.get_Key())(o1),o0);},W.Get(o2.Var)));},Set:function(o3){return W.Set(this.Var,this.Storage.Set(o3));},TryFind:function(o4){return d.tryFind(o4,W.Get(this.Var));},TryFindAsView:function(o5){return v.Map(function(o6){return d.tryFind(o5,o6);},this.Var.get_View());},TryFindByKey:function(o7){var o9=this;return d.tryFind(function(o8){return m.Equals(o9.key.call(null,o8),o7);},W.Get(o9.Var));},TryFindByKeyAsView:function(o_){var o$,pb=this;o$=function(pa){return m.Equals(pb.key.call(null,pa),o_);};return v.Map(function(pc){return d.tryFind(o$,pc);},pb.Var.get_View());},UpdateAll:function(pd){var pi=this;return W.Update(this.Var,function(pe){d.iteri(function(pf){return function(pg){return u.iter(function(ph){return d.set(pe,pf,ph);},pd(pg));};},pe);return pi.Storage.Set(pe);});},UpdateBy:function(pj,pk){var pl,pm,po=this,pp,pq;pl=W.Get(this.Var);pm=d.tryFindIndex(function(pn){return m.Equals(po.key.call(null,pn),pk);},pl);if(pm.$==1){pp=pm.$0;pq=pj(d.get(pl,pp));return pq.$==1?W.Set(po.Var,po.Storage.SetAt(pp,pq.$0,pl)):null;}else{return null;}},get_Key:function(){return this.key;},get_Length:function(){return d.length(W.Get(this.Var));},get_LengthAsView:function(){return v.Map(function(pr){return d.length(pr);},this.Var.get_View());},get_View:function(){return this.view;}},{Create:function(ps,pt){return _6.CreateWithStorage(ps,_7.InMemory(c.toArray(pt)));},CreateWithStorage:function(pu,pv){var pw;pw=Y.Create(c.toArray(J.distinctBy(pu,pv.Init())));return $.New(_6,{key:pu,Var:pw,Storage:pv,view:v.Map(function(px){pv.Set(px);return px.slice();},pw.get_View())});}}),ListModel1:$.Class({},{FromSeq:function(py){return _6.Create(function(pz){return pz;},py);},Key:function(pA){return pA.key;},View:function(pB){return pB.view;}}),ListModels:{Contains:function(pC,pD,pE){var pF;pF=pC(pD);return c.exists(function(pG){return m.Equals(pC(pG),pF);},pE);}},Model:$.Class({get_View:function(){return _8.View(this);}},{Create:function(pH,pI){var pJ;pJ=Y.Create(pI);return $.New(_9,{$:0,$0:pJ,$1:v.Map(pH,pJ.get_View())});},Update:function(pK,pL){return W.Update(pL.$0,function(pM){pK(pM);return pM;});}}),Model1:$.Class({},{View:function(pN){return pN.$1;}}),ReactiveExtensions:$.Class({},{New:function(){return $.New(this,{});}}),RefImpl:$.Class({Get:function(){return this.get.call(null,this.baseRef.Get());},Set:function(pO){var pQ=this;return this.baseRef.Update(function(pP){return(pQ.update.call(null,pP))(pO);});},Update:function(pR){var pT=this;return this.baseRef.Update(function(pS){return(pT.update.call(null,pS))(pR(pT.get.call(null,pS)));});},UpdateMaybe:function(pU){var pW=this;return this.baseRef.UpdateMaybe(function(pV){return u.map(pW.update.call(null,pV),pU(pW.get.call(null,pV)));});},get_Id:function(){return this.id;},get_View:function(){return v.Map(this.get,this.baseRef.get_View());}},{New:function(pX,pY,pZ){var p0;p0=$.New(this,{});p0.baseRef=pX;p0.get=pY;p0.update=pZ;p0.id=h.Id();return p0;}}),RefImpl1:$.Class({Get:function(){return this.get.call(null,this.m.FindByKey(this.key));},Set:function(p1){var p3=this;return this.m.UpdateBy(function(p2){return{$:1,$0:(p3.update.call(null,p2))(p1)};},p3.key);},Update:function(p4){var p6=this;return this.m.UpdateBy(function(p5){return{$:1,$0:(p6.update.call(null,p5))(p4(p6.get.call(null,p5)))};},p6.key);},UpdateMaybe:function(p7){var p9=this;return this.m.UpdateBy(function(p8){return u.map(p9.update.call(null,p8),p7(p9.get.call(null,p8)));},p9.key);},get_Id:function(){return this.id;},get_View:function(){return v.Map(this.get,this.m.FindByKeyAsView(this.key));}},{New:function(p_,p$,qa,qb){var qc;qc=$.New(this,{});qc.m=p_;qc.key=p$;qc.get=qa;qc.update=qb;qc.id=h.Id();return qc;}}),Route:{Append:function(qd,qe){return{$:0,$0:p.Append(qd.$0,qe.$0)};},FromList:function(qf){return{$:0,$0:p.FromArray(d.ofSeq(qf))};},MakeHash:function(qg){return _.concat("/",d.map(function(qh){return ba(qh);},p.ToArray(qg.$0)));},NoHash:function(qi){return _.StartsWith(qi,"#")?qi.substring(1):qi;},ParseHash:function(qj){return{$:0,$0:p.FromArray(d.map(function(qk){return bb(qk);},_.SplitChars(bc.NoHash(qj),[47],1)))};},SameHash:function(ql,qm){return bc.NoHash(ql)===bc.NoHash(qm);},ToList:function(qn){return C.ofArray(p.ToArray(qn.$0));}},RouteMap1:$.Class({},{Create:function(qo,qp){return{Des:qp,Ser:qo};},Install:function(qq){return bd.InstallMap(qq);}}),Router:$.Class({},{Dir:function(qr,qs){return be.Prefix(qr,be.Merge(qs));},Install:function(qt,qu){return bd.Install(qt,qu);},Merge:function(qv){return bd.MergeRouters(qv);},Prefix:function(qw,qx){return{$:0,$0:qx.$0,$1:bf.Prefix(qw,qx.$1)};},Route:function(qy,qz,qA){return bd.DefineRoute(qy,qz,qA);}}),Routing:{ComputeBodies:function(qB){var qC;qC=bg.New12();d.iter(function(qD){return qC.set_Item(qD.RouteId,qD);},bf.ToArray(qB));return qC;},DefineRoute:function(qE,qF,qG){var qH,qI,qJ,qK;qH=Y.Create(qF);qI=h.Int();qJ=(qG({$:0,$0:qI}))(qH);qK=bf.Leaf({$:0,$0:qI,$1:function(qL){F.Sink(function(qM){return qL.UpdateRoute.call(null,bd.DoLink(qE,qM));},qH.get_View());return{OnRouteChanged:function(qN){return W.Set(qH,bd.DoRoute(qE,qN));},OnSelect:function(){return qL.UpdateRoute.call(null,bd.DoLink(qE,W.Get(qH)));},RouteId:qI,RouteValue:qJ};}});return{$:0,$0:{$:1,$0:qJ},$1:qK};},DoLink:function(qP,qQ){return bc.FromList(qP.Ser.call(null,qQ));},DoRoute:function(qR,qS){return qR.Des.call(null,bc.ToList(qS));},Install:function(qT,qU){var qV,qW,qX,q0,q1,q6,q8,q9,q_,ra;qV=qU.$0;qW=qU.$1;qX=bd.InstallMap({Des:function(qY){return bc.FromList(qY);},Ser:function(qZ){return bc.ToList(qZ);}});q0={Bodies:g.U(),CurrentRoute:qX,CurrentSite:0,Selection:g.U()};q1=bf.Map(function(q2){return function(q3){var q4;q4=q3.$0;return q3.$1.call(null,{UpdateRoute:function(q5){return bd.OnInternalSiteUpdate(q0,q4,q2,q5);}});};},qW);q0.Bodies=bd.ComputeBodies(q1);q6=function(q7){return bf.Lookup(q1,bc.ToList(q7));};q8=q6(W.Get(qX));if(q8.$==0){q_=q8.$0;q0.CurrentSite=q_.RouteId;q9=Y.Create(q_.RouteValue);}else{q9=Y.Create(qV.$==1?qV.$0:O.FailWith("Site.Install fails on empty site"));}q0.Selection=q9;F.Sink(function(q$){return bd.OnSelectSite(q0,qT(q$));},q9.get_View());ra=function(rb){var rc;rc=q6(rb);return rc.$==1?null:bd.OnGlobalRouteChange(q0,rc.$0,bc.FromList(rc.$1));};ra(W.Get(qX));F.Sink(ra,qX.get_View());return q9;},InstallMap:function(rd){var re,rg,rh;re=function(){return rd.Des.call(null,bc.ToList(bc.ParseHash(bh.location.hash)));};rg=Y.Create(re(null));rh=function(){var rj;rj=re(null);return!m.Equals(rd.Ser.call(null,W.Get(rg)),rd.Ser.call(null,rj))?W.Set(rg,rj):null;};bh.onpopstate=rh;bh.onhashchange=rh;F.Sink(function(rk){var rl;rl=bc.MakeHash(bc.FromList(rd.Ser.call(null,rk)));return!bc.SameHash(bh.location.hash,rl)?void(bh.location.hash=rl):null;},rg.get_View());return rg;},MergeRouters:function(rm){var rn,ro,rq;rn=c.toArray(rm);ro=bf.Merge(c.map(function(rp){return rp.$1;},rn));rq=c.tryPick(function(rr){return rr.$0;},rn);return ro.$==1?{$:0,$0:rq,$1:ro.$0}:O.FailWith("Invalid Site.Merge: need more prefix disambiguation");},OnGlobalRouteChange:function(rs,rt,ru){if(rs.CurrentSite!==rt.RouteId){rs.CurrentSite=rt.RouteId;W.Set(rs.Selection,rt.RouteValue);}return rt.OnRouteChanged.call(null,ru);},OnInternalSiteUpdate:function(rv,rw,rx,ry){return rv.CurrentSite===rw?bd.SetCurrentRoute(rv,bc.Append(bc.FromList(rx),ry)):null;},OnSelectSite:function(rz,rA){var rB;rB=rA.$0;if(rz.CurrentSite!==rB){rz.CurrentSite=rB;return rz.Bodies.get_Item(rB).OnSelect.call(null,null);}else{return null;}},SetCurrentRoute:function(rC,rD){return!m.Equals(W.Get(rC.CurrentRoute),rD)?W.Set(rC.CurrentRoute,rD):null;}},Snap1:{Bind:function(rE,rF){var rG,rH;rG=bi.Create();rH=function(){return bi.MarkObsolete(rG);};bi.When(rF,function(rJ){var rK;rK=rE(rJ);return bi.When(rK,function(rL){return(bi.IsForever(rK)?bi.IsForever(rF):false)?bi.MarkForever(rG,rL):bi.MarkReady(rG,rL);},rH);},rH);return rG;},Create:function(){return bi.Make({$:3,$0:[],$1:[]});},CreateForever:function(rM){return bi.Make({$:0,$0:rM});},CreateWithValue:function(rN){return bi.Make({$:2,$0:rN,$1:[]});},IsForever:function(rO){return rO.State.$==0?true:false;},IsObsolete:function(rP){return rP.State.$==1?true:false;},Make:function(rQ){return{State:rQ};},Map:function(rR,rS){var rT,rU;rT=rS.State;if(rT.$==0){return bi.CreateForever(rR(rT.$0));}else{rU=bi.Create();bi.When(rS,function(rV){return bi.MarkDone(rU,rS,rR(rV));},function(){return bi.MarkObsolete(rU);});return rU;}},Map2:function(rX,rY,rZ){var r0,r1,r2,r4,r5,r6,r7,r9;r0=[rY.State,rZ.State];if(r0[0].$==0){if(r0[1].$==0){r1=r0[1].$0;return bi.CreateForever((rX(r0[0].$0))(r1));}else{return bi.Map(rX(r0[0].$0),rZ);}}else{if(r0[1].$==0){r2=r0[1].$0;return bi.Map(function(r3){return(rX(r3))(r2);},rY);}else{r4=bi.Create();r5=[{$:0}];r6=[{$:0}];r7=function(){r5[0]={$:0};r6[0]={$:0};return bi.MarkObsolete(r4);};r9=function(){var r$,sa,sb;r$=[r5[0],r6[0]];if(r$[0].$==1){if(r$[1].$==1){sa=r$[0].$0;sb=r$[1].$0;return(bi.IsForever(rY)?bi.IsForever(rZ):false)?bi.MarkForever(r4,(rX(sa))(sb)):bi.MarkReady(r4,(rX(sa))(sb));}else{return null;}}else{return null;}};bi.When(rY,function(sc){r5[0]={$:1,$0:sc};return r9(null);},r7);bi.When(rZ,function(sd){r6[0]={$:1,$0:sd};return r9(null);},r7);return r4;}}},Map3:function(se,sf,sg,sh){var si,sj,sk,sl,sm,so,sp,sr,su,sv,sx,sA,sD,sE,sF,sG,sH,sJ;si=[sf.State,sg.State,sh.State];if(si[0].$==0){if(si[1].$==0){if(si[2].$==0){sj=si[1].$0;sk=si[2].$0;return bi.CreateForever(((se(si[0].$0))(sj))(sk));}else{sl=si[0].$0;sm=si[1].$0;return bi.Map(function(sn){return((se(sl))(sm))(sn);},sh);}}else{if(si[2].$==0){so=si[0].$0;sp=si[2].$0;return bi.Map(function(sq){return((se(so))(sq))(sp);},sg);}else{sr=si[0].$0;return bi.Map2(function(ss){return function(st){return((se(sr))(ss))(st);};},sg,sh);}}}else{if(si[1].$==0){if(si[2].$==0){su=si[1].$0;sv=si[2].$0;return bi.Map(function(sw){return((se(sw))(su))(sv);},sf);}else{sx=si[1].$0;return bi.Map2(function(sy){return function(sz){return((se(sy))(sx))(sz);};},sf,sh);}}else{if(si[2].$==0){sA=si[2].$0;return bi.Map2(function(sB){return function(sC){return((se(sB))(sC))(sA);};},sf,sg);}else{sD=bi.Create();sE=[{$:0}];sF=[{$:0}];sG=[{$:0}];sH=function(){sE[0]={$:0};sF[0]={$:0};sG[0]={$:0};return bi.MarkObsolete(sD);};sJ=function(){var sL,sM,sN,sO;sL=[sE[0],sF[0],sG[0]];if(sL[0].$==1){if(sL[1].$==1){if(sL[2].$==1){sM=sL[0].$0;sN=sL[1].$0;sO=sL[2].$0;return((bi.IsForever(sf)?bi.IsForever(sg):false)?bi.IsForever(sh):false)?bi.MarkForever(sD,((se(sM))(sN))(sO)):bi.MarkReady(sD,((se(sM))(sN))(sO));}else{return null;}}else{return null;}}else{return null;}};bi.When(sf,function(sP){sE[0]={$:1,$0:sP};return sJ(null);},sH);bi.When(sg,function(sQ){sF[0]={$:1,$0:sQ};return sJ(null);},sH);bi.When(sh,function(sR){sG[0]={$:1,$0:sR};return sJ(null);},sH);return sD;}}}},MapAsync:function(sS,sT){var sU;sU=bi.Create();bi.When(sT,function(sV){return bj.StartTo(sS(sV),function(sW){return bi.MarkDone(sU,sT,sW);});},function(){return bi.MarkObsolete(sU);});return sU;},MapCached:function(sY,sZ,s0){return bi.Map(function(s1){var s2,s3,s4;s2=sY[0];if(s2.$==1){if(m.Equals(s1,s2.$0[0])){return s2.$0[1];}else{s3=sZ(s1);sY[0]={$:1,$0:[s1,s3]};return s3;}}else{s4=sZ(s1);sY[0]={$:1,$0:[s1,s4]};return s4;}},s0);},MarkDone:function(s5,s6,s7){return bi.IsForever(s6)?bi.MarkForever(s5,s7):bi.MarkReady(s5,s7);},MarkForever:function(s8,s9){var s_,s$;s_=s8.State;if(s_.$==3){s$=s_.$0;s8.State={$:0,$0:s9};return l.Iter(function(ta){return ta(s9);},s$);}else{return null;}},MarkObsolete:function(tb){var tc,td,tf;tc=tb.State;if(tc.$==1){return null;}else{if(tc.$==2){td=tc.$1;tb.State={$:1};return l.Iter(function(te){return te(null);},td);}else{if(tc.$==3){tf=tc.$1;tb.State={$:1};return l.Iter(function(tg){return tg(null);},tf);}else{return null;}}}},MarkReady:function(th,ti){var tj,tk;tj=th.State;if(tj.$==3){tk=tj.$0;th.State={$:2,$0:ti,$1:tj.$1};return l.Iter(function(tl){return tl(ti);},tk);}else{return null;}},SnapshotOn:function(tm,tn){var to,tp,tq,tr,ts;to=[tm.State,tn.State];if(to[1].$==0){return bi.CreateForever(to[1].$0);}else{tp=bi.Create();tq=[{$:0}];tr=[false];ts=function(){var tu;if(tr[0]){tu=tq[0];return tu.$==1?bi.IsForever(tn)?bi.MarkForever(tp,tu.$0):tu.$==1?bi.MarkReady(tp,tu.$0):null:tu.$==1?bi.MarkReady(tp,tu.$0):null;}else{return null;}};bi.When(tm,function(){tr[0]=true;return ts(null);},function(){tq[0]={$:0};return bi.MarkObsolete(tp);});bi.When(tn,function(tx){tq[0]={$:1,$0:tx};return ts(null);},function(){});return tp;}},When:function(tz,tA,tB){var tC,tD,tE;tC=tz.State;if(tC.$==1){return tB(null);}else{if(tC.$==2){tD=tC.$0;l.Add(tB,tC.$1);return tA(tD);}else{if(tC.$==3){tE=tC.$1;l.Add(tA,tC.$0);return l.Add(tB,tE);}else{return tA(tC.$0);}}}}},Storage1:{ArrayStorage:$.Class({Add:function(tF,tG){tG.push(tF);return tG;},Init:function(){return this.init;},RemoveIf:function(tH,tI){return d.filter(tH,tI);},Set:function(tJ){return c.toArray(tJ);},SetAt:function(tK,tL,tM){d.set(tM,tK,tL);return tM;}},{New:function(tN){var tO;tO=$.New(this,{});tO.init=tN;return tO;}}),InMemory:function(tP){return bk.New(tP);},LocalStorage:function(tQ,tR){return bl.New(tQ,tR);},LocalStorageBackend:$.Class({Add:function(tS,tT){tT.push(tS);return this.set(tT);},Init:function(){var tU,tV;tU=this.storage.getItem(this.id);if(tU===null){return[];}else{try{return d.map(this.serializer.Decode,bm.parse(tU));}catch(tV){return[];}}},RemoveIf:function(tW,tX){return this.set(d.filter(tW,tX));},Set:function(tY){return this.set(c.toArray(tY));},SetAt:function(tZ,t0,t1){d.set(t1,tZ,t0);return this.set(t1);},clear:function(){return this.storage.removeItem(this.id);},set:function(t2){this.storage.setItem(this.id,bm.stringify(d.map(this.serializer.Encode,t2)));return t2;}},{New:function(t3,t4){var t5;t5=$.New(this,{});t5.id=t3;t5.serializer=t4;t5.storage=bh.localStorage;return t5;}})},String:{isBlank:function(t6){return _.forall(function(t7){return bn.IsWhiteSpace(t7);},t6);}},Submitter:$.Class({Trigger:function(){return W.Set(this["var"],null);},get_Input:function(){return this.input;},get_View:function(){return this.view;}},{Create:function(t8,t9){return bo.New(t8,t9);},CreateOption:function(t_){return bo.New(v.Map(function(t$){return{$:1,$0:t$};},t_),{$:0});},New:function(ua,ub){var uc,ud;uc=$.New(this,{});uc.input=ua;uc["var"]=Y.Create(null);ud=uc.input;uc.view=v.SnapshotOn(ub,uc["var"].get_View(),ud);return uc;},View:function(ue){return ue.get_View();}}),Submitter1:$.Class({},{Input:function(uf){return uf.get_Input();},Trigger:function(ug){return ug.Trigger();}}),Trans:$.Class({},{AnimateChange:function(uh,ui,uj){return(uh.TChange.call(null,ui))(uj);},AnimateEnter:function(uk,ul){return uk.TEnter.call(null,ul);}}),Trans1:$.Class({},{AnimateExit:function(um,un){return um.TExit.call(null,un);},CanAnimateChange:function(uo){return(uo.TFlags&1)!==0;},CanAnimateEnter:function(up){return(up.TFlags&2)!==0;},CanAnimateExit:function(uq){return(uq.TFlags&4)!==0;},Change:function(ur,us){return{TChange:ur,TEnter:us.TEnter,TExit:us.TExit,TFlags:us.TFlags|1};},Create:function(ut){return{TChange:ut,TEnter:function(uu){return o.Const(uu);},TExit:function(uv){return o.Const(uv);},TFlags:1};},Enter:function(uw,ux){return{TChange:ux.TChange,TEnter:uw,TExit:ux.TExit,TFlags:ux.TFlags|2};},Exit:function(uy,uz){return{TChange:uz.TChange,TEnter:uz.TEnter,TExit:uy,TFlags:uz.TFlags|4};},Trivial:function(){return{TChange:function(){return function(uB){return o.Const(uB);};},TEnter:function(uC){return o.Const(uC);},TExit:function(uD){return o.Const(uD);},TFlags:0};}}),Trie1:{AllSome:function(uE){var uF,uG,uH,uI;uF=bp.Get(uE);uG=br.New2();uH=true;while(uH?uF.MoveNext():false){uI=uF.get_Current();if(uI.$==1){uG.Add(uI.$0);}else{uH=false;}}return uH?{$:1,$0:uG.ToArray()}:{$:0};},Empty:function(){return{$:1};},IsLeaf:function(uJ){return uJ.$==2?true:false;},Leaf:function(uK){return{$:2,$0:uK};},Look:function(uL,uM){var uN,uO,uP;uN=[uM,uL];if(uN[0].$==2){return{$:0,$0:uN[0].$0,$1:uL};}else{if(uN[0].$==0){if(uN[1].$==1){uO=uN[1].$1;uP=bs.TryFind(uN[1].$0,uN[0].$0);return uP.$==0?{$:1}:bf.Look(uO,uP.$0);}else{return{$:1};}}else{return{$:1};}}},Lookup:function(uQ,uR){return bf.Look(c.toList(uR),uQ);},Map:function(uS,uT){return bf.MapLoop($.New(P,{$:0}),uS,uT);},MapLoop:function(uU,uV,uW){var uX;if(uW.$==1){return{$:1};}else{if(uW.$==2){uX=uW.$0;return{$:2,$0:(uV(uU))(uX)};}else{return bf.TrieBranch(bs.Map(function(uY){return function(uZ){return bf.MapLoop(C.append(uU,C.ofArray([uY])),uV,uZ);};},uW.$0));}}},Mapi:function(u0,u1){var u2;u2=[0];return bf.Map(function(u3){var u4;u4=u2[0];u2[0]=u4+1;return(u0(u4))(u3);},u1);},Merge:function(u5){var u6,u7;u6=c.toArray(u5);u7=d.length(u6);return u7===0?{$:1,$0:{$:1}}:u7===1?{$:1,$0:d.get(u6,0)}:c.exists(function(u8){return bf.IsLeaf(u8);},u6)?{$:0}:u.map(function(u9){return bf.TrieBranch(u9);},bf.MergeMaps(function(u_){return bf.Merge(u_);},c.choose(function(u$){return u$.$==0?{$:1,$0:u$.$0}:{$:0};},u6)));},MergeMaps:function(va,vb){var vc;vc=c.collect(function(vd){return bs.ToSeq(vd);},vb);return u.map(function(ve){return bs.OfArray(c.toArray(ve));},bf.AllSome(c.map(function(vf){var vg;vg=vf[0];return u.map(function(vh){return[vg,vh];},va(vf[1]));},bs.ToSeq(c.fold(function(vi){return function(vj){return bf.MultiAdd(vj[0],vj[1],vi);};},bt.New1([]),vc)))));},MultiAdd:function(vk,vl,vm){return vm.Add(vk,$.New(P,{$:1,$0:vl,$1:bf.MultiFind(vk,vm)}));},MultiFind:function(vn,vo){return O.DefaultArg(bs.TryFind(vn,vo),$.New(P,{$:0}));},Prefix:function(vp,vq){return bf.TrieBranch(bt.New1(C.ofArray([[vp,vq]])));},ToArray:function(vr){var vs;vs=[];bf.Map(function(){return function(vu){return l.Add(vu,vs);};},vr);return l.ToArray(vs);},TrieBranch:function(vv){return vv.get_IsEmpty()?{$:1}:{$:0,$0:vv};}},Var:$.Class({Get:function(){return W.Get(this);},Set:function(vw){return W.Set(this,vw);},Update:function(vx){return W.Update(this,vx);},UpdateMaybe:function(vy){var vz;vz=vy(W.Get(this));return vz.$==1?W.Set(this,vz.$0):null;},get_Id:function(){return"uinref"+$$.String(W.GetId(this));},get_View:function(){var vB=this;return{$:0,$0:function(){return W.Observe(vB);}};},get_View1:function(){return this.get_View();}},{Create:function(vC){return $.New(Y,{Const:false,Current:vC,Snap:bi.CreateWithValue(vC),Id:h.Int()});}}),Var1:$.Class({},{Get:function(vD){return vD.Current;},GetId:function(vE){return vE.Id;},Lens:function(vF,vG,vH){return bu.New(vF,vG,vH);},Observe:function(vI){return vI.Snap;},Set:function(vJ,vK){if(vJ.Const){return null;}else{bi.MarkObsolete(vJ.Snap);vJ.Current=vK;vJ.Snap=bi.CreateWithValue(vK);return;}},SetFinal:function(vL,vM){if(vL.Const){return null;}else{vL.Const=true;vL.Current=vM;vL.Snap=bi.CreateForever(vM);return;}},Update:function(vN,vO){return W.Set(vN,vO(W.Get(vN)));}}),View:$.Class({},{ConvertSeqNode:function(vP,vQ){var vR,vS;vR=Y.Create(vQ);vS=vR.get_View();return{NValue:vP(vS),NVar:vR,NView:vS};},CreateLazy:function(vT){var vU;vU=[{$:0}];return{$:0,$0:function(){var vW,vX,vY;vW=vU[0];if(vW.$==1){if(!bi.IsObsolete(vW.$0)){return vW.$0;}else{vX=vT(null);vU[0]={$:1,$0:vX};return vX;}}else{vY=vT(null);vU[0]={$:1,$0:vY};return vY;}}};},CreateLazy2:function(vZ,v0,v1){var v2,v3;v2=v0.$0;v3=v1.$0;return v.CreateLazy(function(){var v5,v6;v5=v2(null);v6=v3(null);return(vZ(v5))(v6);});},Map:function(v7,v8){var v9;v9=v8.$0;return v.CreateLazy(function(){return bi.Map(v7,v9(null));});},Map2:function(v$,wa,wb){return v.CreateLazy2(function(wc){return function(wd){return bi.Map2(v$,wc,wd);};},wa,wb);},MapAsync:function(we,wf){var wg;wg=wf.$0;return v.CreateLazy(function(){return bi.MapAsync(we,wg(null));});},MapCached:function(wi,wj){var wk,wl;wk=wj.$0;wl=[{$:0}];return v.CreateLazy(function(){return bi.MapCached(wl,wi,wk(null));});},MapSeqCached:function(wn,wo){return v.MapSeqCachedBy(function(wp){return wp;},wn,wo);},MapSeqCachedBy:function(wq,wr,ws){var wt;wt=[bg.New12()];return v.Map(function(wu){var wv,ww,wx;wv=wt[0];ww=bg.New12();wx=d.map(function(wy){var wz,wA;wz=wq(wy);wA=wv.ContainsKey(wz)?wv.get_Item(wz):wr(wy);ww.set_Item(wz,wA);return wA;},c.toArray(wu));wt[0]=ww;return wx;},ws);},MapSeqCachedView:function(wB,wC){return v.MapSeqCachedViewBy(function(wD){return wD;},function(){return function(wF){return wB(wF);};},wC);},MapSeqCachedViewBy:function(wG,wH,wI){var wJ;wJ=[bg.New12()];return v.Map(function(wK){var wL,wM,wN;wL=wJ[0];wM=bg.New12();wN=d.map(function(wO){var wP,wQ,wR;wP=wG(wO);if(wL.ContainsKey(wP)){wR=wL.get_Item(wP);W.Set(wR.NVar,wO);wQ=wR;}else{wQ=v.ConvertSeqNode(function(wS){return(wH(wP))(wS);},wO);}wM.set_Item(wP,wQ);return wQ.NValue;},c.toArray(wK));wJ[0]=wM;return wN;},wI);},SnapshotOn:function(wT,wU,wV){var wW,wX,wY,wZ;wW=wU.$0;wX=wV.$0;wY=bi.CreateWithValue(wT);wZ=[false];return v.CreateLazy(function(){var w1,w2;w1=wW(null);w2=wX(null);if(wZ[0]){return bi.SnapshotOn(w1,w2);}else{bi.When(bi.SnapshotOn(w1,w2),function(){return null;},function(){if(!wZ[0]){wZ[0]=true;return bi.MarkObsolete(wY);}else{return null;}});return wY;}});},UpdateWhile:function(w5,w6,w7){var w8;w8=[w5];return v.Map2(function(w9){return function(w_){if(w9){w8[0]=w_;}return w8[0];};},w6,w7);},get_Do:function(){return{$:0};}}),View1:$.Class({},{Apply:function(w$,xa){return v.Map2(function(xb){return function(xc){return xb(xc);};},w$,xa);},Bind:function(xd,xe){return F.Join(v.Map(xd,xe));},Const:function(xf){var xg;xg=bi.CreateForever(xf);return{$:0,$0:function(){return xg;}};},Join:function(xi){var xj;xj=xi.$0;return v.CreateLazy(function(){return bi.Bind(function(xl){return xl.$0.call(null,null);},xj(null));});},Sink:function(xm,xn){var xo,xp;xo=xn.$0;xp=function(){return bi.When(xo(null),xm,function(){return bj.Schedule(xp);});};return bj.Schedule(xp);}})}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Concurrency);b=$.Safe($$.Array);c=$.Safe($$.WebSharper.Seq);d=$.Safe($$.WebSharper.Arrays);e=$.Safe($$.WebSharper.UI);f=$.Safe(e.Next);g=$.Safe(f.Abbrev);h=$.Safe(g.Fresh);i=$.Safe($$.WebSharper.Collections);j=$.Safe(i.HashSetProxy);k=$.Safe(g.HashSet);l=$.Safe(g.JQueue);m=$.Safe($$.WebSharper.Unchecked);n=$.Safe(g.Slot1);o=$.Safe(f.An);p=$.Safe(f.AppendList1);q=$.Safe(f.Anims);r=$.Safe($$.requestAnimationFrame);s=$.Safe(f.Trans);t=$.Safe(f.Trans1);u=$.Safe($$.WebSharper.Option);v=$.Safe(f.View);w=$.Safe($$.WebSharper.Lazy);x=$.Safe(f.Array);y=$.Safe(f.Attrs);z=$.Safe(f.DomUtility);A=$.Safe(f.AttrModule);B=$.Safe(f.AttrProxy);C=$.Safe($$.WebSharper.List);D=$.Safe(f.AnimatedAttrNode);E=$.Safe(f.DynamicAttrNode);F=$.Safe(f.View1);G=$.Safe($$.document);H=$.Safe(f.Doc);I=$.Safe(f.Elt);J=$.Safe($$.Seq);K=$.Safe(f.Docs);L=$.Safe(f.String);M=$.Safe(f.CheckedInput);N=$.Safe(g.Mailbox);O=$.Safe($$.WebSharper.Operators);P=$.Safe(C.T);Q=$.Safe($$.jQuery);R=$.Safe(K.NodeSet);S=$.Safe(f.DocElemNode);T=$.Safe(K.DomNodes);U=$.Safe(f.Easing);V=$.Safe(f.Easings);W=$.Safe(f.Var1);X=$.Safe($$.RegExp);Y=$.Safe(f.Var);Z=$.Safe(f.FlowBuilder);_0=$.Safe(f.Flow);_1=$.Safe(f.Input);_2=$.Safe(f.DoubleInterpolation);_3=$.Safe(f.Key);_4=$.Safe(f.ListModels);_5=$.Safe(f.RefImpl1);_6=$.Safe(f.ListModel);_7=$.Safe(f.Storage1);_8=$.Safe(f.Model1);_9=$.Safe(f.Model);_=$.Safe($$.WebSharper.Strings);ba=$.Safe($$.encodeURIComponent);bb=$.Safe($$.decodeURIComponent);bc=$.Safe(f.Route);bd=$.Safe(f.Routing);be=$.Safe(f.Router);bf=$.Safe(f.Trie1);bg=$.Safe(i.Dictionary);bh=$.Safe($$.window);bi=$.Safe(f.Snap1);bj=$.Safe(g.Async);bk=$.Safe(_7.ArrayStorage);bl=$.Safe(_7.LocalStorageBackend);bm=$.Safe($$.JSON);bn=$.Safe($$.WebSharper.Char);bo=$.Safe(f.Submitter);bp=$.Safe($$.WebSharper.Enumerator);bq=$.Safe(i.ResizeArray);br=$.Safe(bq.ResizeArrayProxy);bs=$.Safe(i.MapModule);bt=$.Safe(i.FSharpMap);return bu=$.Safe(f.RefImpl);});$.OnLoad(function(){$.Inherit(I,H);_1.MousePosSt1();_1.MouseBtnSt1();_1.KeyListenerState();_1.ActivateKeyListener();_1.ActivateButtonListener();V.CubicInOut();z.Doc();y.EmptyAttr();A.ValidateForm();h.counter();return;});}());
